---
import Welcome from '../components/Welcome.astro';
import Layout from '../layouts/Layout.astro';
import { auth } from '@backend/auth';

const session = await auth.api.getSession({
    headers: Astro.request.headers,
});

if (!session) {
    return Astro.redirect('/sign-in');
}
---

<Layout>
    <div class="welcome-message">
        <h1>Welcome, {session.user.name}!</h1>
        <p>You are logged in as {session.user.email}.</p>
    </div>

    <Welcome />
</Layout>
